import{ab as ie,ac as se,ad as le,ae as Y,af as de,ag as N,r as D,ah as ue,ai as ce,aj as he,I as $,ak as fe,b as me,al as pe,g as ve,u as H,j as l,C as ge,B as q,e as be,am as Q,v as ye}from"./index-da16cce7.js";import{T as xe,R as J}from"./TextFilter-1524b9fb.js";import"./debounce-c1ba2006.js";class we extends ie{constructor(e,r){super(),this.client=e,this.setOptions(r),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const a=this.options;this.options=this.client.defaultMutationOptions(e),se(a,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(r=this.currentMutation)==null||r.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const r={listeners:!0};e.type==="success"?r.onSuccess=!0:e.type==="error"&&(r.onError=!0),this.notify(r)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,r){return this.mutateOptions=r,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:le(),r={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=r}notify(e){Y.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var r,a,n,o;(r=(a=this.mutateOptions).onSuccess)==null||r.call(a,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(o=this.mutateOptions).onSettled)==null||n.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var i,u,d,c;(i=(u=this.mutateOptions).onError)==null||i.call(u,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(d=(c=this.mutateOptions).onSettled)==null||d.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)})})}}function G(t,e,r){const a=de(t,e,r),n=N({context:a.context}),[o]=D.useState(()=>new we(n,a));D.useEffect(()=>{o.setOptions(a)},[o,a]);const i=ue(D.useCallback(d=>o.subscribe(Y.batchCalls(d)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),u=D.useCallback((d,c)=>{o.mutate(d,c).catch(Ce)},[o]);if(i.error&&ce(o.options.useErrorBoundary,[i.error]))throw i.error;return{...i,mutate:u,mutateAsync:i.mutate}}function Ce(){}function Me(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function b(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function v(t){b(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||he(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var Se={};function K(){return Se}function B(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function T(t,e){b(2,arguments);var r=v(t),a=v(e),n=r.getTime()-a.getTime();return n<0?-1:n>0?1:n}function Pe(t,e){b(2,arguments);var r=v(t),a=v(e),n=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return n*12+o}function ke(t,e){return b(2,arguments),v(t).getTime()-v(e).getTime()}var L={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Re="trunc";function De(t){return t?L[t]:L[Re]}function We(t){b(1,arguments);var e=v(t);return e.setHours(23,59,59,999),e}function Te(t){b(1,arguments);var e=v(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function je(t){b(1,arguments);var e=v(t);return We(e).getTime()===Te(e).getTime()}function Ie(t,e){b(2,arguments);var r=v(t),a=v(e),n=T(r,a),o=Math.abs(Pe(r,a)),i;if(o<1)i=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-n*o);var u=T(r,a)===-n;je(v(t))&&o===1&&T(t,a)===1&&(u=!1),i=n*(o-Number(u))}return i===0?0:i}function ze(t,e,r){b(2,arguments);var a=ke(t,e)/1e3;return De(r==null?void 0:r.roundingMethod)(a)}function U(t,e){var r,a,n,o,i,u,d,c;b(1,arguments);var p=K(),f=Me((r=(a=(n=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(i=e.locale)===null||i===void 0||(u=i.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:p.weekStartsOn)!==null&&a!==void 0?a:(d=p.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=v(t),m=g.getUTCDay(),x=(m<f?7:0)+m-f;return g.setUTCDate(g.getUTCDate()-x),g.setUTCHours(0,0,0,0),g}var Oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ee=function(e,r,a){var n,o=Oe[e];return typeof o=="string"?n=o:r===1?n=o.one:n=o.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};const Ae=Ee;function P(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.width?String(e.width):t.defaultWidth,a=t.formats[r]||t.formats[t.defaultWidth];return a}}var Ne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Be={date:P({formats:Ne,defaultWidth:"full"}),time:P({formats:$e,defaultWidth:"full"}),dateTime:P({formats:Fe,defaultWidth:"full"})};const Le=Be;var Ue={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xe=function(e,r,a,n){return Ue[e]};const _e=Xe;function w(t){return function(e,r){var a=r!=null&&r.context?String(r.context):"standalone",n;if(a==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,i=r!=null&&r.width?String(r.width):o;n=t.formattingValues[i]||t.formattingValues[o]}else{var u=t.defaultWidth,d=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[d]||t.values[u]}var c=t.argumentCallback?t.argumentCallback(e):e;return n[c]}}var Ve={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},He={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Je={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ge=function(e,r){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},Ke={ordinalNumber:Ge,era:w({values:Ve,defaultWidth:"wide"}),quarter:w({values:Ye,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:w({values:He,defaultWidth:"wide"}),day:w({values:qe,defaultWidth:"wide"}),dayPeriod:w({values:Qe,defaultWidth:"wide",formattingValues:Je,defaultFormattingWidth:"wide"})};const Ze=Ke;function C(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],o=e.match(n);if(!o)return null;var i=o[0],u=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?tt(u,function(f){return f.test(i)}):et(u,function(f){return f.test(i)}),c;c=t.valueCallback?t.valueCallback(d):d,c=r.valueCallback?r.valueCallback(c):c;var p=e.slice(i.length);return{value:c,rest:p}}}function et(t,e){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r]))return r}function tt(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return r}function Z(t){return function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.match(t.matchPattern);if(!a)return null;var n=a[0],o=e.match(t.parsePattern);if(!o)return null;var i=t.valueCallback?t.valueCallback(o[0]):o[0];i=r.valueCallback?r.valueCallback(i):i;var u=e.slice(n.length);return{value:i,rest:u}}}var rt=/^(\d+)(th|st|nd|rd)?/i,at=/\d+/i,nt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ot={any:[/^b/i,/^(a|c)/i]},it={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},st={any:[/1/i,/2/i,/3/i,/4/i]},lt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ut={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ct={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ht={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ft={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mt={ordinalNumber:Z({matchPattern:rt,parsePattern:at,valueCallback:function(e){return parseInt(e,10)}}),era:C({matchPatterns:nt,defaultMatchWidth:"wide",parsePatterns:ot,defaultParseWidth:"any"}),quarter:C({matchPatterns:it,defaultMatchWidth:"wide",parsePatterns:st,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:C({matchPatterns:lt,defaultMatchWidth:"wide",parsePatterns:dt,defaultParseWidth:"any"}),day:C({matchPatterns:ut,defaultMatchWidth:"wide",parsePatterns:ct,defaultParseWidth:"any"}),dayPeriod:C({matchPatterns:ht,defaultMatchWidth:"any",parsePatterns:ft,defaultParseWidth:"any"})};const pt=mt;var vt={code:"en-US",formatDistance:Ae,formatLong:Le,formatRelative:_e,localize:Ze,match:pt,options:{weekStartsOn:0,firstWeekContainsDate:1}};const ee=vt;function te(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function gt(t){return te({},t)}var X=1440,bt=2520,E=43200,yt=86400;function xt(t,e,r){var a,n;b(2,arguments);var o=K(),i=(a=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:o.locale)!==null&&a!==void 0?a:ee;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var u=T(t,e);if(isNaN(u))throw new RangeError("Invalid time value");var d=te(gt(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:u}),c,p;u>0?(c=v(e),p=v(t)):(c=v(t),p=v(e));var f=ze(p,c),g=(B(p)-B(c))/1e3,m=Math.round((f-g)/60),x;if(m<2)return r!=null&&r.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,d):f<10?i.formatDistance("lessThanXSeconds",10,d):f<20?i.formatDistance("lessThanXSeconds",20,d):f<40?i.formatDistance("halfAMinute",0,d):f<60?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",1,d):m===0?i.formatDistance("lessThanXMinutes",1,d):i.formatDistance("xMinutes",m,d);if(m<45)return i.formatDistance("xMinutes",m,d);if(m<90)return i.formatDistance("aboutXHours",1,d);if(m<X){var j=Math.round(m/60);return i.formatDistance("aboutXHours",j,d)}else{if(m<bt)return i.formatDistance("xDays",1,d);if(m<E){var I=Math.round(m/X);return i.formatDistance("xDays",I,d)}else if(m<yt)return x=Math.round(m/E),i.formatDistance("aboutXMonths",x,d)}if(x=Ie(p,c),x<12){var z=Math.round(m/E);return i.formatDistance("xMonths",z,d)}else{var y=x%12,M=Math.floor(x/12);return y<3?i.formatDistance("aboutXYears",M,d):y<9?i.formatDistance("overXYears",M,d):i.formatDistance("almostXYears",M+1,d)}}function wt(t,e,r){b(2,arguments);var a=U(t,r),n=U(e,r);return a.getTime()===n.getTime()}var Ct={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},Mt=function(e,r,a){var n,o=Ct[e];return typeof o=="string"?n=o:r===1?n=o.one:n=o.other.replace("{{count}}",String(r)),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?n+"内":n+"前":n};const St=Mt;var Pt={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},kt={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},Rt={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Dt={date:P({formats:Pt,defaultWidth:"full"}),time:P({formats:kt,defaultWidth:"full"}),dateTime:P({formats:Rt,defaultWidth:"full"})};const Wt=Dt;function _(t,e,r){var a="eeee p";return wt(t,e,r)?a:t.getTime()>e.getTime()?"'下个'"+a:"'上个'"+a}var Tt={lastWeek:_,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:_,other:"PP p"},jt=function(e,r,a,n){var o=Tt[e];return typeof o=="function"?o(r,a,n):o};const It=jt;var zt={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},Ot={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},Et={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},At={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},Nt={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},$t={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},Ft=function(e,r){var a=Number(e);switch(r==null?void 0:r.unit){case"date":return a.toString()+"日";case"hour":return a.toString()+"时";case"minute":return a.toString()+"分";case"second":return a.toString()+"秒";default:return"第 "+a.toString()}},Bt={ordinalNumber:Ft,era:w({values:zt,defaultWidth:"wide"}),quarter:w({values:Ot,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:w({values:Et,defaultWidth:"wide"}),day:w({values:At,defaultWidth:"wide"}),dayPeriod:w({values:Nt,defaultWidth:"wide",formattingValues:$t,defaultFormattingWidth:"wide"})};const Lt=Bt;var Ut=/^(第\s*)?\d+(日|时|分|秒)?/i,Xt=/\d+/i,_t={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},Vt={any:[/^(前)/i,/^(公元)/i]},Yt={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},Ht={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},qt={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Qt={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},Jt={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Gt={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},Kt={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},Zt={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},er={ordinalNumber:Z({matchPattern:Ut,parsePattern:Xt,valueCallback:function(e){return parseInt(e,10)}}),era:C({matchPatterns:_t,defaultMatchWidth:"wide",parsePatterns:Vt,defaultParseWidth:"any"}),quarter:C({matchPatterns:Yt,defaultMatchWidth:"wide",parsePatterns:Ht,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:C({matchPatterns:qt,defaultMatchWidth:"wide",parsePatterns:Qt,defaultParseWidth:"any"}),day:C({matchPatterns:Jt,defaultMatchWidth:"wide",parsePatterns:Gt,defaultParseWidth:"any"}),dayPeriod:C({matchPatterns:Kt,defaultMatchWidth:"any",parsePatterns:Zt,defaultParseWidth:"any"})};const tr=er;var rr={code:"zh-CN",formatDistance:St,formatLong:Wt,formatRelative:It,localize:Lt,match:tr,options:{weekStartsOn:1,firstWeekContainsDate:4}};const ar=rr;function nr(t){const e=t.providers,r=Object.keys(e),a={};for(let n=0;n<r.length;n++){const o=r[n];a[o]={...e[o],idx:n}}return{byName:a,names:r}}async function or(t,e){const{url:r,init:a}=$(e);let n={providers:{}};try{const o=await fetch(r+t,a);o.ok&&(n=await o.json())}catch(o){console.log("failed to GET /providers/rules",o)}return nr(n)}async function re({name:t,apiConfig:e}){const{url:r,init:a}=$(e);try{return(await fetch(r+`/providers/rules/${t}`,{method:"PUT",...a})).ok}catch(n){return console.log("failed to PUT /providers/rules/:name",n),!1}}async function ir({names:t,apiConfig:e}){for(let r=0;r<t.length;r++)await re({name:t[r],apiConfig:e})}var sr=function(t,e,r,a,n,o,i,u){if(!t){var d;if(e===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,a,n,o,i,u],p=0;d=new Error(e.replace(/%s/g,function(){return c[p++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},lr=sr;const dr=fe(lr);function ur(t){return dr(t.rules&&t.rules.length>=0,"there is no valid rules list in the rules API response"),t.rules.map((e,r)=>({...e,id:r}))}async function cr(t,e){let r={rules:[]};try{const{url:a,init:n}=$(e),o=await fetch(a+t,n);o.ok&&(r=await o.json())}catch(a){console.log("failed to fetch rules",a)}return ur(r)}const{useState:W,useEffect:V,useCallback:Sr,useMemo:Pr}=be,ae=pe("");function hr(t,e){const r=N(),{mutate:a,isLoading:n}=G(re,{onSuccess:()=>{r.invalidateQueries(["/providers/rules"])}});return[i=>{i.preventDefault(),a({name:t,apiConfig:e})},n]}function fr(t){const e=N(),{data:r}=ne(t),{mutate:a,isLoading:n}=G(ir,{onSuccess:()=>{e.invalidateQueries(["/providers/rules"])}});return[i=>{i.preventDefault(),r&&r.names&&a({names:r.names,apiConfig:t})},n]}function ne(t){return Q(["/providers/rules",t],()=>or("/providers/rules",t))}function mr(t){const{data:e=[],isFetching:r}=Q(["/rules",t],()=>cr("/rules",t)),{data:a={names:[],byName:{}}}=ne(t),[n]=ye(ae);if(n==="")return{rules:e,provider:a,isFetching:r};{const o=n.toLowerCase();return{rules:e.filter(i=>i.payload.toLowerCase().indexOf(o)>=0),isFetching:r,provider:{byName:a.byName,names:a.names.filter(i=>i.toLowerCase().indexOf(o)>=0)}}}}function pr({idx:t,name:e,vehicleType:r,behavior:a,updatedAt:n,ruleCount:o,apiConfig:i}){const{t:u,i18n:d}=H(),[c,p]=hr(e,i),f=d.language.startsWith("zh")?ar:ee,g=xt(new Date(n),new Date,{locale:f,addSuffix:!0});return l.jsxs("div",{style:s.providerCard,children:[l.jsxs("div",{style:s.providerCardHeader,children:[l.jsx("span",{style:s.providerCardName,children:e}),l.jsx(q,{onClick:c,disabled:p,style:s.providerRefreshBtn,children:l.jsx(J,{isRotating:p,size:12})})]}),l.jsxs("div",{style:s.providerCardInfo,children:[l.jsxs("span",{style:s.providerCardType,children:[r," / ",a]}),l.jsx("span",{style:s.providerCardRules,children:u("rule_item_count",{count:o,defaultValue:o<2?`${o} rule`:`${o} rules`})})]}),l.jsx("div",{style:s.providerCardTime,children:u("rule_item_updated",{timeAgo:g,defaultValue:`Updated ${g}`})})]})}const A={_default:"#59caf9",DIRECT:"#f5bc41",REJECT:"#cb3166"};function vr({proxy:t}){let e=A._default;return A[t]&&(e=A[t]),{color:e}}const gr={DOMAIN:{backgroundColor:"#e3f2fd",color:"#1565c0",borderColor:"#1565c0"},DOMAINSUFFIX:{backgroundColor:"#f3e5f5",color:"#6a1b9a",borderColor:"#6a1b9a"},"DOMAIN-KEYWORD":{backgroundColor:"#fff3e0",color:"#e65100",borderColor:"#e65100"},"DOMAIN-WILDCARD":{backgroundColor:"#e8f5e9",color:"#2e7d32",borderColor:"#2e7d32"},"DOMAIN-REGEX":{backgroundColor:"#fce4ec",color:"#c2185b",borderColor:"#c2185b"},GEOSITE:{backgroundColor:"#e0f2f1",color:"#00695c",borderColor:"#00695c"},GEOIP:{backgroundColor:"#e1f5fe",color:"#01579b",borderColor:"#01579b"},RULESET:{backgroundColor:"#f1f8e9",color:"#558b2f",borderColor:"#558b2f"},MATCH:{backgroundColor:"#fbe9e7",color:"#d84315",borderColor:"#d84315"},IPCIDR:{backgroundColor:"#ede7f6",color:"#4527a0",borderColor:"#4527a0"},IPCIDR6:{backgroundColor:"#e8eaf6",color:"#283593",borderColor:"#283593"},SRCIPCIDR:{backgroundColor:"#f9fbe7",color:"#827717",borderColor:"#827717"}};function br(t){const e=t?t.toUpperCase():"",r=gr[e];return r||{backgroundColor:"var(--bg-log-info-tag, #454545)",color:"var(--color-text-secondary, #ccc)",borderColor:"var(--color-separator, #333)"}}const s={container:{fontFamily:"var(--font-normal)",height:"100%",display:"flex",flexDirection:"column"},header:{display:"grid",gridTemplateColumns:"1fr minmax(auto, 330px)",alignItems:"center",paddingRight:"15px",gap:"15px"},topPagination:{padding:"15px 20px",borderBottom:"1px solid var(--color-separator)",background:"var(--color-bg-card)"},tableWrapper:{flex:1,overflow:"auto",background:"var(--color-background)",display:"flex",flexDirection:"column",alignItems:"flex-start"},table:{width:"auto",minWidth:"600px",borderCollapse:"collapse",fontSize:"0.875rem",tableLayout:"auto"},thead:{background:"var(--color-bg-card)",position:"sticky",top:0,zIndex:10},th:{padding:"10px 15px",textAlign:"left",fontSize:"0.75rem",color:"var(--color-text-secondary)",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid var(--color-separator)",whiteSpace:"nowrap",background:"var(--color-bg-card)",position:"sticky",top:0,zIndex:10},ruleRow:{borderBottom:"1px solid var(--color-separator)",transition:"background 0.2s"},td:{padding:"8px 15px",fontSize:"0.875rem",textAlign:"left"},idCell:{color:"var(--color-text-secondary)",opacity:.6,fontWeight:500,textAlign:"left",width:"50px"},proxyCell:{fontWeight:700,fontSize:"0.938rem",whiteSpace:"nowrap",width:"auto",minWidth:"100px",paddingRight:"30px"},typeCell:{fontSize:"0.813rem",whiteSpace:"nowrap",width:"auto",minWidth:"130px",paddingRight:"30px"},typeLabel:{display:"inline-block",padding:"4px 10px",borderRadius:"4px",fontSize:"0.75rem",fontWeight:600,border:"1.5px solid",whiteSpace:"nowrap"},payloadCell:{fontFamily:"var(--font-normal)",fontSize:"0.875rem",wordBreak:"break-all",lineHeight:"1.5",color:"var(--color-text)",width:"auto",maxWidth:"500px",paddingRight:"30px"},sizeCell:{fontSize:"0.813rem",color:"var(--color-text-secondary)",textAlign:"left",fontWeight:500,width:"auto",whiteSpace:"nowrap",minWidth:"60px"},paginationWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"15px"},paginationInfo:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},paginationControls:{display:"flex",alignItems:"center",gap:"15px",flexWrap:"wrap"},pageSizeLabel:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.875rem",color:"var(--color-text-secondary)"},pageSizeSelect:{padding:"6px 10px",border:"1px solid var(--color-input-border)",borderRadius:"4px",fontSize:"0.875rem",cursor:"pointer",background:"var(--color-input-bg)",color:"var(--color-text)"},pageButtons:{display:"flex",alignItems:"center",gap:"6px"},pageButton:{padding:"6px 10px",border:"1px solid var(--color-input-border)",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.2s",minWidth:"32px",background:"var(--color-btn-bg)",color:"var(--color-btn-fg)"},pageButtonDisabled:{opacity:.4,cursor:"not-allowed"},pageInfo:{padding:"0 8px",fontSize:"0.875rem",color:"var(--color-text-secondary)",whiteSpace:"nowrap"},providerWrapper:{background:"var(--color-bg-card)",borderBottom:"1px solid var(--color-separator)"},providerHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 15px",cursor:"pointer",userSelect:"none",borderBottom:"1px solid var(--color-separator)"},providerTitle:{fontSize:"0.813rem",fontWeight:600,color:"var(--color-text)",display:"flex",alignItems:"center",gap:"8px"},providerToggle:{fontSize:"0.75rem",color:"var(--color-text-secondary)",transition:"transform 0.2s"},providerContent:{padding:"12px",paddingTop:"50px",position:"relative"},providerGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"10px"},updateAllButton:{padding:"6px 12px",border:"1px solid var(--color-input-border)",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",background:"var(--color-btn-bg)",color:"var(--color-btn-fg)",fontWeight:600,transition:"transform 0.1s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.1s, filter 0.1s",display:"flex",alignItems:"center",gap:"6px",position:"absolute",top:"12px",left:"12px",zIndex:5,outline:"none",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},providerCard:{background:"var(--color-background)",border:"1px solid var(--color-separator)",borderRadius:"6px",padding:"8px 10px",fontSize:"0.75rem"},providerCardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},providerCardName:{fontWeight:600,fontSize:"0.813rem",color:"var(--color-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},providerRefreshBtn:{padding:"2px 4px",minWidth:"auto",height:"auto",border:"none",background:"transparent",cursor:"pointer"},providerCardInfo:{display:"flex",flexDirection:"column",gap:"3px",marginBottom:"4px"},providerCardType:{fontSize:"0.688rem",color:"var(--color-text-secondary)"},providerCardRules:{fontSize:"0.75rem",color:"var(--color-text)",fontWeight:500},providerCardTime:{fontSize:"0.688rem",color:"var(--color-text-secondary)",opacity:.7},emptyState:{textAlign:"center",padding:"40px",color:"var(--color-text-secondary)",fontSize:"1rem"},bottomPagination:{padding:"15px 20px",borderTop:"1px solid var(--color-separator)",background:"var(--color-bg-card)"}},yr=t=>({apiConfig:ve(t)});function xr({apiConfig:t}){const{rules:e,provider:r}=mr(t),{t:a}=H(),[n,o]=W(50),[i,u]=W(1),[d,c]=W(!1),[p,f]=fr(t),[g,m]=W(!1);V(()=>{const h=sessionStorage.getItem("rules_pageSize");h?o(h==="all"?"all":parseInt(h)):e.length>0&&e.length<=150&&o("all")},[e.length]),V(()=>{sessionStorage.setItem("rules_pageSize",n.toString())},[n]);const x=h=>{o(h),u(1)},j=()=>{if(n==="all")return e;const h=(i-1)*n,S=h+n;return e.slice(h,S)},I=()=>n==="all"?1:Math.ceil(e.length/n),z=j(),y=I(),M=()=>l.jsxs("div",{style:s.paginationWrapper,children:[l.jsxs("div",{style:s.paginationInfo,children:[a("showing")||"Showing"," ",n==="all"?e.length:Math.min(n,e.length)," ",a("of")||"of"," ",e.length," ",a("Rules")||"rules"]}),l.jsxs("div",{style:s.paginationControls,children:[l.jsxs("label",{style:s.pageSizeLabel,children:[a("perPage")||"Per Page",":",l.jsxs("select",{value:n,onChange:h=>x(h.target.value==="all"?"all":parseInt(h.target.value)),style:s.pageSizeSelect,children:[l.jsx("option",{value:"20",children:"20"}),l.jsx("option",{value:"50",children:"50"}),l.jsx("option",{value:"100",children:"100"}),l.jsx("option",{value:"all",children:a("all")||"All"})]})]}),n!=="all"&&y>1&&l.jsxs("div",{style:s.pageButtons,children:[l.jsx("button",{onClick:()=>u(1),disabled:i===1,style:{...s.pageButton,...i===1?s.pageButtonDisabled:{}},children:"«"}),l.jsx("button",{onClick:()=>u(h=>Math.max(1,h-1)),disabled:i===1,style:{...s.pageButton,...i===1?s.pageButtonDisabled:{}},children:"‹"}),l.jsxs("span",{style:s.pageInfo,children:[a("page")||"Page"," ",i," ",a("of")||"of"," ",y]}),l.jsx("button",{onClick:()=>u(h=>Math.min(y,h+1)),disabled:i===y,style:{...s.pageButton,...i===y?s.pageButtonDisabled:{}},children:"›"}),l.jsx("button",{onClick:()=>u(y),disabled:i===y,style:{...s.pageButton,...i===y?s.pageButtonDisabled:{}},children:"»"})]})]})]});return l.jsxs("div",{style:s.container,children:[l.jsxs("div",{style:s.header,children:[l.jsx(ge,{title:a("Rules")}),l.jsx(xe,{placeholder:a("search")||"Search...",textAtom:ae})]}),r&&r.names&&r.names.length>0&&l.jsxs("div",{style:s.providerWrapper,children:[l.jsx("div",{style:s.providerHeader,onClick:()=>c(!d),children:l.jsxs("div",{style:s.providerTitle,children:[l.jsx("span",{style:{...s.providerToggle,transform:d?"rotate(90deg)":"rotate(0deg)"},children:"▶"}),a("RuleProvider")," (",r.names.length,")"]})}),d&&l.jsxs("div",{style:s.providerContent,children:[l.jsxs(q,{onClick:p,disabled:f,onMouseDown:()=>m(!0),onMouseUp:()=>m(!1),onMouseLeave:()=>m(!1),style:{...s.updateAllButton,...g?{transform:"scale(0.95) translateY(1px)",filter:"brightness(0.9)",opacity:1,boxShadow:"none"}:{transform:"scale(1) translateY(0)",filter:"brightness(1)",opacity:f?.7:1}},children:[l.jsx(J,{isRotating:f,size:12}),l.jsx("span",{children:a("update_all_rule_provider")||"Update All"})]}),l.jsx("div",{style:s.providerGrid,children:r.names.map((h,S)=>{const k=r.byName[h];return l.jsx(pr,{apiConfig:t,idx:S+1,...k},h)})})]})]}),e.length>0&&l.jsx("div",{style:s.topPagination,children:l.jsx(M,{})}),l.jsx("div",{style:s.tableWrapper,children:e.length===0?l.jsx("div",{style:s.emptyState,children:a("noRules")||"No rules available"}):l.jsxs("table",{style:s.table,children:[l.jsx("thead",{style:s.thead,children:l.jsxs("tr",{children:[l.jsx("th",{style:{...s.idCell,...s.th},children:a("priority")||"priority"}),l.jsx("th",{style:{...s.proxyCell,...s.th},children:a("targetProxy")||"Target"}),l.jsx("th",{style:{...s.typeCell,...s.th},children:a("matchType")||"Type"}),l.jsx("th",{style:{...s.payloadCell,...s.th},children:a("matchTarget")||"Payload"}),l.jsx("th",{style:{...s.sizeCell,...s.th},children:a("rulecount")||"Count"})]})}),l.jsx("tbody",{children:z.map((h,S)=>{const k=n==="all"?S:(i-1)*n+S,oe=vr({proxy:h.proxy}),R=br(h.type),F=h.size||0;return l.jsxs("tr",{style:s.ruleRow,onMouseEnter:O=>{O.currentTarget.style.background="var(--color-bg-card)"},onMouseLeave:O=>{O.currentTarget.style.background="transparent"},children:[l.jsx("td",{style:{...s.td,...s.idCell},children:h.id!==void 0?h.id:k+1}),l.jsx("td",{style:{...s.td,...s.proxyCell,...oe},children:h.proxy}),l.jsx("td",{style:{...s.td,...s.typeCell},children:l.jsx("span",{style:{...s.typeLabel,...R,backgroundColor:R.backgroundColor,color:R.color,borderColor:R.borderColor},children:h.type})}),l.jsx("td",{style:{...s.td,...s.payloadCell},children:h.payload}),l.jsx("td",{style:{...s.td,...s.sizeCell},children:F>0?F:""})]},h.id||k)})})]})}),e.length>0&&l.jsx("div",{style:s.bottomPagination,children:l.jsx(M,{})})]})}const kr=me(yr)(xr);export{kr as default,ae as ruleFilterTextAtom};
