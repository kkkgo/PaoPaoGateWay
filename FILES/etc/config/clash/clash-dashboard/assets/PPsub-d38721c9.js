import{u as ge,r as h,j as e}from"./index-63736a7a.js";function je(){var ee;const{t:ve,i18n:te}=ge(),[g,S]=h.useState([]),[u,m]=h.useState([]),[x,y]=h.useState([]),[Se,z]=h.useState(new Set);h.useState(!1),h.useState([]),h.useState({x:0,y:0}),h.useState(null);const[I,B]=h.useState(!1),[D,oe]=h.useState({x:0,y:0,verticalAlign:"top"}),[re,ne]=h.useState("down"),[w,se]=h.useState(null),[k,R]=h.useState(null),H=h.useRef(null),[K,E]=h.useState(null),[C,J]=h.useState(""),[le,G]=h.useState(null),[T,ae]=h.useState("sub"),[M,O]=h.useState(!1),[A,U]=h.useState(""),[$,W]=h.useState(3),[N,P]=h.useState("0"),[X,_]=h.useState(""),[ie,Y]=h.useState(null),[de,V]=h.useState(null),[F,Z]=h.useState({show:!1,message:"",type:"info"}),a=(ee=te.language)==null?void 0:ee.startsWith("zh"),i={title:a?"PPsubé…ç½®ç¼–è¾‘å™¨":"PPsub Config Editor",exportJson:a?"å¯¼å‡ºé…ç½®":"Export JSON",importJson:a?"å¯¼å…¥é…ç½®":"Import JSON",loadCurrent:a?"å½“å‰é…ç½®":"Current Config",authError:a?"æœªæŽˆæƒè®¿é—®: è¯·å…ˆç™»å½•":"Unauthorized: Please login first",configNotFound:a?"å½“å‰é…ç½®ä¸å­˜åœ¨":"Current config not found",loadSuccessWarn:a?"å½“å‰åªè¯»é…ç½®ä»…ä¾›è½½å…¥ç¼–è¾‘å™¨ï¼Œç¼–è¾‘å®ŒæˆåŽè¯·ä¸è¦å¿˜è®°å¯¼å‡ºé…ç½®ï¼":"Read-only config loaded. Don't forget to Export after editing!",loadError:a?"åŠ è½½å¤±è´¥: ":"Load Failed: ",monitorTitle:a?"å…¨å±€å¥åº·ç›‘æµ‹":"Global Health Monitor",enableMonitor:a?"å¼€å¯å…¨å±€å¥åº·ç›‘æµ‹":"Enable Global Health Monitor",monitorUrl:a?"ç›‘æµ‹URL":"Check URL",monitorUrlDesc:a?"è‹¥ä¸ºç©ºï¼Œé»˜è®¤ä¸º https://www.youtube.com/generate_204":"Default: https://www.youtube.com/generate_204 if empty",monitorRetries:a?"å¤±è´¥é‡è½½é˜ˆå€¼ (æ¬¡)":"Failure Threshold (Times)",monitorRetriesDesc:a?"å½“è¿žç»­ç›‘æµ‹å¤±è´¥è¾¾åˆ°æ­¤æ¬¡æ•°åŽï¼Œé‡è½½æ‰€æœ‰é…ç½®ã€‚":"Reload all configs after consecutive failures reach this count.",monitorStatus:a?"æœŸæœ›è¿”å›žç ":"Expected Status",monitorStatusAny:a?"ä»»æ„ (Any)":"Any",monitorStatusCustom:a?"è‡ªå®šä¹‰":"Custom",monitorCustomPlaceholder:a?"è¾“å…¥çŠ¶æ€ç  (å¦‚ 200) æˆ–èŒƒå›´ (å¦‚ 200-399)":"Code (e.g. 200) or Range (e.g. 200-399)",subsTitle:a?"è®¢é˜…æä¾›å•†":"Subscription Providers",addSub:a?"æ·»åŠ è®¢é˜…æä¾›å•†":"Add Provider",nodeGroupsTitle:a?"èŠ‚ç‚¹ç»„":"Node Groups",addNodeGroup:a?"æ·»åŠ èŠ‚ç‚¹ç»„":"Add Node Group",ruleSetsTitle:a?"è§„åˆ™ç»„":"Rule Group",addRuleSet:a?"æ·»åŠ è§„åˆ™ç»„":"Add Rule",name:a?"åç§°":"Name",url:"URL",forcedDep:a?"å¼ºåˆ¶ä¾èµ–":"Forced Dependency",forcedDepDesc:a?"å¦‚æžœæœ‰å¼ºåˆ¶ä¾èµ–çš„å±žæ€§ï¼Œä¸‹è½½å¤±è´¥åˆ™è§†ä¸ºå¤„ç†å¤±è´¥ã€‚":"If forced dependency is set, download failure will be treated as processing failure.",deleteSub:a?"åˆ é™¤æ­¤è®¢é˜…æä¾›å•†":"Delete Provider",deleteNodeGroup:a?"åˆ é™¤æ­¤èŠ‚ç‚¹ç»„":"Delete Node Group",deleteRuleSet:a?"åˆ é™¤æ­¤è§„åˆ™ç»„":"Delete Rule Set",nodeGroupName:a?"èŠ‚ç‚¹ç»„åç§°":"Node Group Name",nodeMode:a?"èŠ‚ç‚¹æ¨¡å¼":"Node Mode",speedtestMode:a?"æµ‹é€Ÿæ¨¡å¼":"Speedtest Mode",manualMode:a?"æ‰‹åŠ¨é€‰æ‹©æ¨¡å¼":"Manual Selection Mode",speedtestUrl:a?"æµ‹é€ŸURL":"Speedtest URL",speedtestInterval:a?"æµ‹é€Ÿé—´éš”":"Speedtest Interval",keywords:a?"èŠ‚ç‚¹å…³é”®å­—":"Node Keywords",excludeKeywords:a?"æŽ’é™¤å…³é”®å­—":"Exclude Keywords",subsProvider:a?"è®¢é˜…æä¾›å•†":"Subscription Providers",nodeSource:a?"èŠ‚ç‚¹æ¥æº":"Node Source",filterSub:a?"è®¢é˜…æä¾›å•†":"Subscription Providers",filterGroup:a?"èŠ‚ç‚¹ç»„":"Node Groups",filterBoth:a?"æ··åˆ(ä¸¤è€…)":"Both",addKeyword:a?"æ·»åŠ å…³é”®å­—":"Add Keyword",addExcludeKeyword:a?"æ·»åŠ æŽ’é™¤å…³é”®å­—":"Add Exclude Keyword",selectSub:a?"é€‰æ‹©èŠ‚ç‚¹æ¥æº":"Select Node Source",all:a?"å…¨éƒ¨è®¢é˜…":"All Subscriptions",ruleType:a?"è§„åˆ™ç±»åž‹":"Rule Type",manualRule:a?"æ‰‹å†™è§„åˆ™":"Manual Rule",urlDownload:a?"URLä¸‹è½½":"URL Download",ruleSetType:a?"RULE-SETè®¢é˜…":"RULE-SET Sub",ruleUrl:a?"è§„åˆ™URL":"Rule URL",ruleContent:a?"è§„åˆ™å†…å®¹":"Rule Content",moveUp:a?"ä¸Šç§»":"Move Up",moveDown:a?"ä¸‹ç§»":"Move Down",addRemark:a?"ç‚¹å‡»æ·»åŠ å¤‡æ³¨...":"Click to add remark...",topPriority:a?"æœ€ä¼˜å…ˆ":"Top Priority",highPriority:a?"æ¬¡ä¼˜å…ˆ":"High Priority",lastPriority:a?"æœ€åŽ":"Last",priority:a?"ä¼˜å…ˆçº§":"Priority",confirm:a?"ç¡®è®¤åˆ é™¤":"Confirm Delete",cancel:a?"å–æ¶ˆ":"Cancel",emptyState:a?"æš‚æ— æ•°æ®ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ·»åŠ ":"No data yet, click button below to add",importFailed:a?"å¯¼å…¥å¤±è´¥":"Import failed",intervalPlaceholder:a?"ç•™ç©ºé»˜è®¤ä¸º600ç§’":"Default 600s if empty",behavior:a?"è¡Œä¸º(Behavior)":"Behavior",ruleSetInterval:a?"æ›´æ–°é—´éš”(ç§’)":"Interval (s)",ruleFormat:a?"æ ¼å¼(Format)":"Format",downloadViaProxy:a?"é€šè¿‡èŠ‚ç‚¹ç»„ä¸‹è½½":"Download via Node Group",selectProxy:a?"é€‰æ‹©æˆ–è¾“å…¥èŠ‚ç‚¹ç»„":"Select or type Group",copy:a?"å¤åˆ¶":"Copy",copySuffix:a?"-å¤åˆ¶":"-copy",keywordFilterHint:a?"å…³é”®å­—ç­›é€‰ä»…å¯¹æ¥è‡ªâœˆï¸è®¢é˜…æä¾›å•†çš„èŠ‚ç‚¹ç”Ÿæ•ˆ":"Keyword filtering only affects nodes from âœˆï¸Subscription Providers"},f=(n,s)=>{Z({show:!0,message:n,type:s}),setTimeout(()=>Z(r=>({...r,show:!1})),5e3)},q=n=>{try{if(n.global_monitor){O(!!n.global_monitor.enable),U(n.global_monitor.url||""),W(n.global_monitor.retries!==void 0?n.global_monitor.retries:3);const r=String(n.global_monitor.expected_status||"0");["0","200","204","200-399"].includes(r)?(P(r),_("")):(P("custom"),_(r))}else O(!1),U(""),W(3),P("0"),_("");S((n.subs||[]).map(r=>({name:r.name||"",url:r.url||"",isforced:r.isforced||!1}))),m((n["node-groups"]||[]).map(r=>({name:r.name||"",keywords:r.keywords||[],exclude_keywords:r.exclude_keywords||[],subs:r.subs||[],include:r.include||[],mode:r.speedtest_url||r.interval?"speedtest":"manual",speedtest_url:r.speedtest_url||"",interval:r.interval?String(r.interval):""})));const s=n.rules||n["rule-sets"]||[];y(s.map((r,l)=>{let o="manual";r.type==="rule-set"?o="rule-set":r.url&&(o="url");let d="";return o==="manual"&&(Array.isArray(r.fixrule)?d=r.fixrule.join(`
`):r.content&&(d=r.content)),{priority:l+1,remark:r.remark||"",name:r.name||"",type:o,url:o==="url"&&r.url||"",rule_set_url:o==="rule-set"&&r.url||"",content:d,isforced:r.isforced||!1,behavior:r.behavior||"classical",interval:r.interval||86400,format:r.format||"yaml",use_proxy:!!r.proxy,proxy_group:r.proxy||""}}))}catch(s){throw s}},ce=()=>{let n=N;N==="custom"&&(n=X);const s=A.trim()===""?"https://www.youtube.com/generate_204":A,r={version:"1.0",exported_at:new Date().toISOString(),global_monitor:{enable:M,url:s,retries:$,expected_status:n},subs:g.map(c=>{const p={name:c.name,url:c.url};return c.isforced&&(p.isforced=!0),p}),"node-groups":u.map(c=>{var b,j;const p={name:c.name,keywords:c.keywords.filter(v=>typeof v=="string"),exclude_keywords:c.exclude_keywords.filter(v=>typeof v=="string"),subs:c.subs.length>0?c.subs:c.include&&c.include.length>0?[]:["all"],include:c.include||[]};return c.mode==="speedtest"&&((b=c.speedtest_url)!=null&&b.trim()&&(p.speedtest_url=c.speedtest_url.trim()),p.interval=(j=c.interval)!=null&&j.trim()?parseInt(c.interval.trim()):600),p}),rules:x.map((c,p)=>{const b={priority:(p+1)*10};if(c.remark&&(b.remark=c.remark),c.type==="rule-set")b.type="rule-set",b.name=c.name||`ruleset_${p}`,b.url=c.rule_set_url||c.url,b.behavior=c.behavior||"classical",b.interval=c.interval||86400,b.format=c.format||"yaml",c.use_proxy&&c.proxy_group&&(b.proxy=c.proxy_group);else if(c.type==="url")b.url=c.url,c.isforced&&(b.isforced=!0);else{const j=(c.content||"").split(`
`).map(v=>xe(v)).filter(v=>v!==null);b.fixrule=j}return b})},l=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),o=URL.createObjectURL(l),d=document.createElement("a");d.href=o,d.download="ppsub.json",d.click(),URL.revokeObjectURL(o)},pe=n=>{var l;const s=(l=n.target.files)==null?void 0:l[0];if(!s)return;const r=new FileReader;r.onload=o=>{var d;try{const c=JSON.parse((d=o.target)==null?void 0:d.result);q(c)}catch(c){alert(`${i.importFailed}: ${c}`)}},r.readAsText(s),n.target&&(n.target.value="")},ue=async()=>{const n="PaoPaoGateWay",s=localStorage.getItem(n);let r="";if(!s){f(i.authError,"error");return}try{const l=JSON.parse(s);if(!l.clashAPIConfigs||l.clashAPIConfigs.length===0){f(i.authError,"error");return}r=l.clashAPIConfigs[0].secret}catch{f(i.authError,"error");return}try{if(!(await fetch("/version",{headers:{Authorization:"Bearer "+r}})).ok){f(i.authError,"error");return}}catch{f(i.authError,"error");return}try{const l=Math.floor(Date.now()/1e3),o=await fetch(`./ppsub_readonly/ppsub_readkey.json?_=${l}`);if(!o.ok){f(i.configNotFound,"error");return}const c=(await o.json()).ppsub_readkey;if(!c){f(i.configNotFound,"error");return}const b=`./ppsub_readonly/${sha256(c+r)}/ppsub.json?t=${l}`,j=await fetch(b);if(!j.ok){f(i.configNotFound,"error");return}const v=await j.json();q(v),f(i.loadSuccessWarn,"success")}catch(l){console.error(l),f(i.loadError+(l.message||"Unknown error"),"error")}},xe=n=>{n=n.trim().replace(/^[-\s]+/,"");const s=n.indexOf("#");if(s!==-1&&(n=n.substring(0,s).trim()),!n)return null;const r=n.indexOf(",");if(r===-1)return n.toUpperCase().replace(/[-\s_]/g,"")==="MATCH"?"MATCH,auto":null;const l=n.substring(0,r).trim(),o=n.substring(r+1).trim(),d=l.toUpperCase().replace(/[-\s_]/g,""),c={DOMAIN:"DOMAIN",DOMAINSUFFIX:"DOMAIN-SUFFIX",DOMAINKEYWORD:"DOMAIN-KEYWORD",DOMAINWILDCARD:"DOMAIN-WILDCARD",DOMAINREGEX:"DOMAIN-REGEX",GEOSITE:"GEOSITE",IPCIDR:"IP-CIDR",IPCIDR6:"IP-CIDR6",IPSUFFIX:"IP-SUFFIX",IPASN:"IP-ASN",GEOIP:"GEOIP",SRCGEOIP:"SRC-GEOIP",SRCIPASN:"SRC-IP-ASN",SRCIPCIDR:"SRC-IP-CIDR",SRCIPSUFFIX:"SRC-IP-SUFFIX",SRCPORT:"SRC-PORT",DSTPORT:"DST-PORT",NETWORK:"NETWORK",RULESET:"RULE-SET",SUBRULE:"SUB-RULE",AND:"AND",OR:"OR",NOT:"NOT",MATCH:"MATCH"};return c.hasOwnProperty(d)?`${c[d]},${o}`:null},he=(n,s)=>{n==="sub"?S(r=>r.filter((l,o)=>o!==s)):n==="nodeGroup"?m(r=>r.filter((l,o)=>o!==s)):n==="ruleSet"&&y(r=>r.filter((o,d)=>d!==s).map((o,d)=>({...o,priority:d+1}))),R(null)},ye=n=>{const s=[...g],r={...s[n]};r.name=r.name+i.copySuffix,s.splice(n+1,0,r),S(s)},be=n=>{const s=[...u],r=s[n],l={...r,keywords:JSON.parse(JSON.stringify(r.keywords)),exclude_keywords:JSON.parse(JSON.stringify(r.exclude_keywords)),subs:[...r.subs],include:[...r.include||[]],name:r.name+i.copySuffix};l.keywords=l.keywords.map(o=>typeof o=="object"&&o.isNew?{...o,id:Date.now()+Math.random()}:o),l.exclude_keywords=l.exclude_keywords.map(o=>typeof o=="object"&&o.isNew?{...o,id:Date.now()+Math.random()}:o),s.splice(n+1,0,l),m(s)},me=n=>{const s=[...x],l={...s[n]};l.name&&(l.name+=i.copySuffix),l.remark&&(l.remark+=i.copySuffix),delete l.editingRemark,s.splice(n+1,0,l);const o=s.map((d,c)=>({...d,priority:c+1}));y(o)},Q=(n,s)=>{y(r=>{const l=[...r];return s==="up"&&n>0?[l[n],l[n-1]]=[l[n-1],l[n]]:s==="down"&&n<l.length-1&&([l[n],l[n+1]]=[l[n+1],l[n]]),l.map((o,d)=>({...o,priority:d+1}))})},fe=(n,s)=>n===1?"#ff6b35":n===2?"#f7931e":n===s?"#6c757d":"#17a2b8",L=["#ff6b35","#f7931e","#ffc107","#28a745","#17a2b8","#6610f2","#e83e8c"];return e.jsxs("div",{style:t.body,children:[F.show&&e.jsx("div",{style:{...t.notificationBanner,...F.type==="error"?t.notificationError:t.notificationSuccess},children:F.message}),e.jsxs("div",{style:t.container,children:[e.jsxs("header",{style:t.header,children:[e.jsxs("div",{style:t.titleContainer,children:[e.jsx("img",{src:"./paopaogateway.svg",alt:"PPsub Logo",style:t.logo}),e.jsx("h1",{style:t.title,children:i.title})]}),e.jsxs("div",{style:t.headerActions,children:[e.jsx("button",{onClick:ue,style:{...t.loadBtn},children:i.loadCurrent}),e.jsx("button",{onClick:ce,style:{...t.exportBtn},children:i.exportJson}),e.jsx("button",{onClick:()=>{var n;return(n=H.current)==null?void 0:n.click()},style:{...t.importBtn},children:i.importJson}),e.jsx("input",{ref:H,type:"file",accept:".json",onChange:pe,style:{display:"none"}})]})]}),e.jsxs("div",{style:t.content,children:[e.jsxs("section",{style:t.sectionMonitor,children:[e.jsx("div",{style:t.sectionHeader,children:e.jsx("h2",{style:t.sectionTitleMonitor,children:i.monitorTitle})}),e.jsxs("div",{style:t.item,children:[e.jsx("div",{style:t.checkboxRow,children:e.jsxs("label",{style:t.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:M,onChange:n=>O(n.target.checked),style:t.checkbox}),e.jsx("span",{style:t.checkboxText,children:i.enableMonitor})]})}),M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.monitorUrl,":"]}),e.jsx("input",{type:"text",value:A,onChange:n=>U(n.target.value),style:t.input,placeholder:"https://www.youtube.com/generate_204"}),e.jsx("span",{style:{fontSize:"0.85em",color:"var(--color-text-secondary)",alignSelf:"center",marginLeft:"10px"},children:i.monitorUrlDesc})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.monitorStatus,":"]}),e.jsxs("select",{value:N,onChange:n=>P(n.target.value),style:{...t.input,maxWidth:"200px",cursor:"pointer"},children:[e.jsx("option",{value:"0",children:i.monitorStatusAny}),e.jsx("option",{value:"200",children:"200"}),e.jsx("option",{value:"204",children:"204"}),e.jsx("option",{value:"200-399",children:"200-399"}),e.jsx("option",{value:"custom",children:i.monitorStatusCustom})]}),N==="custom"&&e.jsx("input",{type:"text",value:X,onChange:n=>_(n.target.value),style:{...t.input,marginLeft:"10px"},placeholder:i.monitorCustomPlaceholder})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.monitorRetries,":"]}),e.jsx("input",{type:"number",value:$,onChange:n=>W(parseInt(n.target.value)||1),style:{...t.input,maxWidth:"150px"},min:"1"}),e.jsx("span",{style:{fontSize:"0.85em",color:"var(--color-text-secondary)",alignSelf:"center",marginLeft:"10px"},children:i.monitorRetriesDesc})]})]})]})]}),e.jsxs("section",{style:t.sectionSubs,children:[e.jsx("div",{style:t.sectionHeader,children:e.jsx("h2",{style:t.sectionTitleSubs,children:i.subsTitle})}),g.length===0?e.jsx("div",{style:t.emptyState,children:i.emptyState}):g.map((n,s)=>e.jsxs("div",{style:t.item,children:[e.jsxs("div",{style:t.itemHeader,children:[e.jsxs("span",{style:t.itemNumber,children:["#",s+1]}),e.jsx("span",{style:t.itemName,children:n.name||(a?"æœªå‘½åè®¢é˜…æä¾›å•†":"Unnamed Provider")}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>ye(s),style:t.copyBtn,children:i.copy}),e.jsx("button",{onClick:r=>R({type:"sub",index:s,x:r.clientX,y:r.clientY}),style:t.deleteBtn,children:i.deleteSub})]})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:{...t.label,minWidth:"auto",marginRight:"10px"},children:[i.name,":"]}),e.jsx("input",{type:"text",value:n.name,title:n.name,onChange:r=>{const l=[...g];l[s].name=r.target.value,S(l)},style:{...t.input,flex:"none",width:"180px"},placeholder:a?"ä¾‹å¦‚: æŸæœºåœº":"e.g. My Provider"}),e.jsxs("label",{style:{...t.label,minWidth:"auto",marginLeft:"10px"},children:[i.url,":"]}),e.jsx("input",{type:"text",value:n.url,title:n.url,onChange:r=>{const l=[...g];l[s].url=r.target.value,S(l)},style:t.input,placeholder:a?"è®¢é˜…é“¾æŽ¥åœ°å€":"Subscription URL"})]}),e.jsxs("div",{style:{...t.checkboxRow,flexDirection:"row",alignItems:"center"},children:[e.jsxs("label",{style:t.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:n.isforced,onChange:r=>{const l=[...g];l[s].isforced=r.target.checked,S(l)},style:t.checkbox}),e.jsx("span",{style:t.checkboxText,children:i.forcedDep})]}),e.jsx("span",{style:{...t.checkboxDesc,marginLeft:"10px"},children:i.forcedDepDesc})]})]},s)),e.jsx("div",{style:t.sectionFooter,children:e.jsxs("button",{onClick:()=>S([...g,{name:"",url:"",isforced:!1}]),style:t.addBtnSubs,children:["+ ",i.addSub]})})]}),e.jsxs("section",{style:t.sectionNodes,children:[e.jsx("div",{style:t.sectionHeader,children:e.jsx("h2",{style:t.sectionTitleNodes,children:i.nodeGroupsTitle})}),u.length===0?e.jsx("div",{style:t.emptyState,children:i.emptyState}):u.map((n,s)=>e.jsxs("div",{style:t.item,children:[e.jsxs("div",{style:t.itemHeader,children:[e.jsxs("span",{style:t.itemNumber,children:["#",s+1]}),e.jsx("span",{style:t.itemName,children:n.name||(a?"æœªå‘½åèŠ‚ç‚¹ç»„":"Unnamed Node Group")}),e.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>be(s),style:t.copyBtn,children:i.copy}),e.jsx("button",{onClick:r=>R({type:"nodeGroup",index:s,x:r.clientX,y:r.clientY}),style:t.deleteBtn,children:i.deleteNodeGroup})]})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:{...t.label,marginRight:"5px"},children:[i.nodeGroupName,":"]}),e.jsx("input",{type:"text",value:n.name,title:n.name,onChange:r=>{const l=r.target.value,o=u[s].name,d=[...u];d[s].name=l,m(d),o!==l&&y(c=>c.map(p=>p.proxy_group===o?{...p,proxy_group:l}:p))},style:{...t.input,flex:"none",width:"200px"},placeholder:a?"ä¾‹å¦‚: AIä¸“ç”¨":"e.g. AI Nodes"}),e.jsxs("label",{style:{...t.label,minWidth:"auto",marginLeft:"10px"},children:[i.nodeMode,":"]}),e.jsxs("div",{style:{...t.radioGroup,paddingTop:0},children:[e.jsxs("label",{style:t.radioLabel,children:[e.jsx("input",{type:"radio",checked:n.mode==="manual",onChange:()=>{const r=[...u];r[s].mode="manual",m(r)},style:t.radio}),e.jsx("span",{children:i.manualMode})]}),e.jsxs("label",{style:t.radioLabel,children:[e.jsx("input",{type:"radio",checked:n.mode==="speedtest",onChange:()=>{const r=[...u];r[s].mode="speedtest",m(r)},style:t.radio}),e.jsx("span",{children:i.speedtestMode})]})]})]}),n.mode==="speedtest"&&e.jsx(e.Fragment,{children:e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.speedtestInterval,":"]}),e.jsx("input",{type:"text",value:n.interval||"",title:n.interval||"",onChange:r=>{const l=[...u];l[s].interval=r.target.value,m(l)},style:{...t.input,flex:"none",width:"150px"},placeholder:i.intervalPlaceholder}),e.jsxs("label",{style:{...t.label,minWidth:"auto",marginLeft:"20px"},children:[i.speedtestUrl,":"]}),e.jsx("input",{type:"text",value:n.speedtest_url||"",title:n.speedtest_url||"",onChange:r=>{const l=[...u];l[s].speedtest_url=r.target.value,m(l)},style:t.input,placeholder:a?"æµ‹é€ŸURLåœ°å€":"Speedtest URL"})]})}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.keywords,":"]}),e.jsxs("div",{style:t.keywordContainer,children:[n.keywords.map((r,l)=>typeof r=="object"&&r.isNew?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("input",{type:"text",autoFocus:!0,value:r.value,title:r.value,onFocus:()=>E(r.id),onChange:o=>{const d=[...u];d[s].keywords[l].value=o.target.value,m(d)},onBlur:()=>{E(null);const o=[...u],d=o[s].keywords[l].value.trim();d?(o[s].keywords[l]=d,z(c=>new Set([...c,d]))):o[s].keywords.splice(l,1),m(o)},onKeyPress:o=>{o.key==="Enter"&&o.target.blur()},style:t.keywordInput,placeholder:a?"è¾“å…¥å…³é”®å­—":"Enter keyword"}),K===r.id&&e.jsxs("div",{style:t.keywordHintTooltip,children:["                                                                   ",a?"ä»¥ exp# å¼€å¤´çš„å…³é”®å­—å¯åŒ¹é…æ­£åˆ™ï¼Œæ¯”å¦‚ exp#hk[1-3]":"Start with exp# for Regex matching, e.g. exp#hk[1-3]"]})]},`new-${r.id}`):e.jsxs("span",{style:{...t.keywordTag,background:L[l%L.length]},children:[r,e.jsx("span",{onClick:()=>{const o=[...u];o[s].keywords.splice(l,1),m(o)},style:t.removeTag,children:"Ã—"})]},l)),!n.keywords.some(r=>typeof r=="object"&&r.isNew)&&e.jsxs("button",{onClick:()=>{const r=[...u];r[s].keywords.push({id:Date.now(),value:"",isNew:!0}),m(r)},style:t.addTagBtn,children:["+ ",i.addKeyword]})]})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.excludeKeywords,":"]}),e.jsxs("div",{style:t.keywordContainer,children:[n.exclude_keywords.map((r,l)=>typeof r=="object"&&r.isNew?e.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[e.jsx("input",{type:"text",autoFocus:!0,value:r.value,onFocus:()=>E(r.id),onChange:o=>{const d=[...u];d[s].exclude_keywords[l].value=o.target.value,m(d)},onBlur:()=>{E(null);const o=[...u],d=o[s].exclude_keywords[l].value.trim();d?(o[s].exclude_keywords[l]=d,z(c=>new Set([...c,d]))):o[s].exclude_keywords.splice(l,1),m(o)},onKeyPress:o=>{o.key==="Enter"&&o.target.blur()},style:t.keywordInput,placeholder:a?"è¾“å…¥æŽ’é™¤å…³é”®å­—":"Enter exclude keyword"}),K===r.id&&e.jsx("div",{style:t.keywordHintTooltip,children:a?"ä»¥ exp# å¼€å¤´çš„å…³é”®å­—å¯åŒ¹é…æ­£åˆ™ï¼Œæ¯”å¦‚ exp#hk[1-3]":"Start with exp# for Regex matching, e.g. exp#hk[1-3]"})]},`new-${r.id}`):e.jsxs("span",{style:{...t.keywordTag,background:L[(l+3)%L.length]},children:[r,e.jsx("span",{onClick:()=>{const o=[...u];o[s].exclude_keywords.splice(l,1),m(o)},style:t.removeTag,children:"Ã—"})]},l)),!n.exclude_keywords.some(r=>typeof r=="object"&&r.isNew)&&e.jsxs("button",{onClick:()=>{const r=[...u];r[s].exclude_keywords.push({id:Date.now(),value:"",isNew:!0}),m(r)},style:t.addTagBtn,children:["+ ",i.addExcludeKeyword]})]})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.nodeSource,":"]}),e.jsxs("div",{style:t.keywordContainer,children:[n.subs.map((r,l)=>e.jsxs("span",{style:{...t.keywordTag,background:r==="all"?"#6c757d":"#17a2b8"},children:[r==="all"?`â­ ${i.all}`:`âœˆï¸ ${r}`,e.jsx("span",{onClick:()=>{const o=[...u];o[s].subs=o[s].subs.filter((d,c)=>c!==l),o[s].subs.length===0&&o[s].include.length===0&&(o[s].subs=["all"]),m(o)},style:t.removeTag,children:"Ã—"})]},`sub-${l}`)),(n.include||[]).map((r,l)=>e.jsxs("span",{style:{...t.keywordTag,background:"#6610f2"},children:["ðŸ“¦ ",r,e.jsx("span",{onClick:()=>{const o=[...u];o[s].include=o[s].include.filter((d,c)=>c!==l),o[s].subs.length===0&&o[s].include.length===0&&(o[s].subs=["all"]),m(o)},style:t.removeTag,children:"Ã—"})]},`inc-${l}`)),e.jsxs("button",{onClick:r=>{se(s);const o=window.innerHeight-r.clientY<350?"bottom":"top";oe({x:r.clientX,y:r.clientY+5,verticalAlign:o}),J(""),B(!0)},style:t.addTagBtn,children:["+ ",i.selectSub]})]})]}),n.include&&n.include.length>0&&(n.keywords&&n.keywords.length>0||n.exclude_keywords&&n.exclude_keywords.length>0)&&e.jsxs("div",{style:{...t.itemRow,marginTop:"-10px",marginBottom:"15px"},children:[e.jsx("label",{style:t.label}),e.jsx("div",{style:{...t.ruleHint,padding:"8px 12px",fontSize:"0.8em",border:"1px solid #ff9800",marginTop:0,maxWidth:"600px",display:"flex",alignItems:"center",gap:"8px"},children:i.keywordFilterHint})]})]},s)),e.jsx("div",{style:t.sectionFooter,children:e.jsxs("button",{onClick:()=>m([...u,{name:"",keywords:[],exclude_keywords:[],subs:["all"],include:[],mode:"manual",speedtest_url:"",interval:""}]),style:t.addBtnNodes,children:["+ ",i.addNodeGroup]})})]}),e.jsxs("section",{style:t.sectionRules,children:[e.jsx("div",{style:t.sectionHeader,children:e.jsx("h2",{style:t.sectionTitleRules,children:i.ruleSetsTitle})}),x.length===0?e.jsx("div",{style:t.emptyState,children:i.emptyState}):x.map((n,s)=>{const r=x.length;let l=`${i.priority} ${n.priority}`;return n.priority===1?l=i.topPriority:n.priority===2?l=i.highPriority:n.priority===r&&(l=i.lastPriority),e.jsxs("div",{style:t.item,onMouseEnter:()=>V(s),onMouseLeave:()=>V(null),children:[e.jsxs("div",{style:t.itemHeader,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{style:t.itemNumber,children:["#",s+1]}),e.jsx("span",{style:{...t.priorityBadge,background:fe(n.priority,r)},children:l}),n.editingRemark?e.jsx("input",{type:"text",autoFocus:!0,value:n.editingRemark.value,onChange:o=>{const d=[...x];d[s].editingRemark.value=o.target.value,y(d)},onBlur:()=>{const o=[...x];o[s].remark=o[s].editingRemark.value,delete o[s].editingRemark,y(o)},onKeyPress:o=>{o.key==="Enter"&&o.target.blur()},style:t.remarkInput,placeholder:i.addRemark}):e.jsx("span",{onClick:()=>{const o=[...x];o[s].editingRemark={id:Date.now(),value:n.remark},y(o)},style:t.remarkText,children:n.remark||i.addRemark})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>Q(s,"up"),disabled:s===0,style:s===0?{...t.priorityBtn,opacity:.3,cursor:"not-allowed"}:t.priorityBtn,children:["â†‘ ",i.moveUp]}),e.jsxs("button",{onClick:()=>Q(s,"down"),disabled:s===x.length-1,style:s===x.length-1?{...t.priorityBtn,opacity:.3,cursor:"not-allowed"}:t.priorityBtn,children:["â†“ ",i.moveDown]}),e.jsx("button",{onClick:()=>me(s),style:t.copyBtn,children:i.copy}),e.jsx("button",{onClick:o=>R({type:"ruleSet",index:s,x:o.clientX,y:o.clientY}),style:t.deleteBtn,children:i.deleteRuleSet})]})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.ruleType,":"]}),e.jsxs("div",{style:t.radioGroup,children:[e.jsxs("label",{style:t.radioLabel,children:[e.jsx("input",{type:"radio",checked:n.type==="manual",onChange:()=>{const o=[...x];o[s].type="manual",y(o)},style:t.radio}),e.jsx("span",{children:i.manualRule})]}),e.jsxs("label",{style:t.radioLabel,children:[e.jsx("input",{type:"radio",checked:n.type==="url",onChange:()=>{const o=[...x];o[s].type="url",y(o)},style:t.radio}),e.jsx("span",{children:i.urlDownload})]}),e.jsxs("label",{style:t.radioLabel,children:[e.jsx("input",{type:"radio",checked:n.type==="rule-set",onChange:()=>{const o=[...x];o[s].type="rule-set",o[s].behavior||(o[s].behavior="classical"),o[s].interval||(o[s].interval=86400),o[s].name||(o[s].name=""),o[s].format||(o[s].format="yaml"),y(o)},style:t.radio}),e.jsx("span",{children:i.ruleSetType})]})]})]}),n.type==="rule-set"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:{...t.label,width:"auto",minWidth:"60px"},children:[i.name,":"]}),e.jsx("input",{type:"text",value:n.name||"",title:n.name||"",onChange:o=>{const d=[...x];d[s].name=o.target.value,y(d)},onFocus:o=>{o.target.style.boxShadow="0 0 0 3px rgba(0, 123, 255, 0.25)",o.target.style.borderColor="#007bff"},onBlur:o=>{o.target.style.boxShadow="none",o.target.style.borderColor="#dee2e6"},style:{...t.input,flex:"none",width:"190px"},placeholder:a?"ä¾‹å¦‚: openai":"e.g. openai"}),e.jsxs("label",{style:{...t.label,minWidth:"auto",marginLeft:"10px"},children:[i.ruleUrl,":"]}),e.jsx("input",{type:"text",value:n.rule_set_url||"",title:n.rule_set_url||"",onChange:o=>{const d=o.target.value,c=[...x];c[s].rule_set_url=d,d.toLowerCase().endsWith(".mrs")?c[s].format="mrs":d.toLowerCase().endsWith(".yaml")||d.toLowerCase().endsWith(".yml")?c[s].format="yaml":d.toLowerCase().endsWith(".txt")&&(c[s].format="text"),y(c)},style:{...t.input,direction:"rtl"},placeholder:a?"RULE-SETæ–‡ä»¶ä¸‹è½½åœ°å€":"Rule Set URL"})]}),e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:{...t.label,width:"auto",minWidth:"60px"},children:[i.ruleFormat,":"]}),e.jsxs("select",{value:n.format||"yaml",onChange:o=>{const d=[...x];d[s].format=o.target.value,y(d)},style:{...t.input,cursor:"pointer",flex:"none",width:"90px"},children:[e.jsx("option",{value:"yaml",children:"yaml"}),e.jsx("option",{value:"text",children:"text"}),e.jsx("option",{value:"mrs",children:"mrs"})]}),e.jsxs("label",{style:{...t.label,minWidth:"auto",marginLeft:"10px"},children:[i.behavior,":"]}),e.jsxs("select",{value:n.behavior||"classical",onChange:o=>{const d=[...x];d[s].behavior=o.target.value,y(d)},style:{...t.input,cursor:"pointer",flex:"none",width:"110px"},children:[e.jsx("option",{value:"classical",children:"classical"}),e.jsx("option",{value:"domain",children:"domain"}),e.jsx("option",{value:"ipcidr",children:"ipcidr"})]}),e.jsxs("label",{style:{...t.label,minWidth:"auto",marginLeft:"10px"},children:[i.ruleSetInterval,":"]}),e.jsx("input",{type:"number",value:n.interval||86400,title:String(n.interval||86400),onChange:o=>{const d=[...x];d[s].interval=parseInt(o.target.value)||86400,y(d)},style:{...t.input,flex:"none",width:"100px"}})]}),e.jsx("div",{style:{...t.checkboxRow,flexDirection:"row",alignItems:"center"},children:e.jsxs("label",{style:t.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:n.use_proxy||!1,onChange:o=>{const d=[...x];d[s].use_proxy=o.target.checked,o.target.checked||delete d[s].proxy_group,y(d)},style:t.checkbox}),e.jsx("span",{style:t.checkboxText,children:i.downloadViaProxy})]})}),n.use_proxy&&e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.selectProxy,":"]}),e.jsxs("div",{style:{position:"relative",flex:1},children:[e.jsx("input",{type:"text",value:n.proxy_group||"",title:n.proxy_group||"",onChange:o=>{const d=[...x];d[s].proxy_group=o.target.value,y(d)},onFocus:o=>{const d=o.target.getBoundingClientRect(),c=window.innerHeight-d.bottom;ne(c<250?"up":"down"),G(s)},onBlur:()=>{setTimeout(()=>G(null),200)},style:t.input,placeholder:i.selectProxy}),le===s&&e.jsxs("div",{style:{...t.dropdownList,...re==="up"?{top:"auto",bottom:"100%",borderRadius:"8px 8px 0 0",borderBottom:"none",borderTop:"1px solid var(--btn-bg)"}:{}},children:[u.filter(o=>!n.proxy_group||o.name.toLowerCase().includes((n.proxy_group||"").toLowerCase())).map((o,d)=>e.jsx("div",{onMouseDown:c=>{c.preventDefault();const p=[...x];p[s].proxy_group=o.name,y(p),G(null)},onMouseEnter:c=>{c.currentTarget.style.background="var(--color-background2)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},style:t.dropdownItem,children:o.name},d)),u.filter(o=>!n.proxy_group||o.name.toLowerCase().includes((n.proxy_group||"").toLowerCase())).length===0&&e.jsx("div",{style:{...t.dropdownItem,cursor:"default",opacity:.6},children:a?"å›žè½¦å¯ä½¿ç”¨è‡ªå®šä¹‰å€¼":"Press Enter to use custom value"})]})]})]}),de===s&&e.jsx("div",{style:{...t.ruleHint,marginTop:"10px"},children:a?e.jsxs(e.Fragment,{children:["RULE-SET è¯´æ˜Ž: RULE-SETæ˜¯è§„åˆ™å¯¹è±¡é›†åˆï¼Œè°ƒç”¨æ–¹å¼: åœ¨å…¶ä»–è§„åˆ™ä¸­ä½¿ç”¨ RULE-SET,RULESETåç§°,èŠ‚ç‚¹ç»„ã€‚",e.jsx("br",{}),"ä¾‹å¦‚: å¤‡æ³¨åä¸º openaiï¼Œè°ƒç”¨è§„åˆ™å†™ RULE-SET,openai,AIä¸“ç”¨",e.jsx("br",{}),"æ­¤è®¢é˜…ç”±Clash/Mihomoæ ¸å¿ƒç›´æŽ¥ç®¡ç†ï¼Œå¦‚ä¸‹è½½å¤±è´¥å°†å¯¼è‡´æ ¸å¿ƒæ— æ³•å¯åŠ¨ã€‚"]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"RULE-SET Note:"})," RULE-SET is a collection of rule objects. Usage: In other rules, use RULE-SET,RuleSetName,NodeGroup.",e.jsx("br",{}),"Example: If name is openai, use RULE-SET,openai,AI-Nodes",e.jsx("br",{}),"This subscription is managed directly by Clash/Mihomo core. Boot failure will occur if download fails."]})})]}):n.type==="url"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:t.itemRow,children:[e.jsxs("label",{style:t.label,children:[i.ruleUrl,":"]}),e.jsx("input",{type:"text",value:n.url,title:n.url,onChange:o=>{const d=[...x];d[s].url=o.target.value,y(d)},onFocus:o=>{o.target.style.boxShadow="0 0 0 3px rgba(0, 123, 255, 0.25)",o.target.style.borderColor="#007bff"},onBlur:o=>{o.target.style.boxShadow="none",o.target.style.borderColor="#dee2e6"},style:t.input,placeholder:a?"è§„åˆ™æ–‡ä»¶ä¸‹è½½åœ°å€":"Rule file download URL"})]}),e.jsxs("div",{style:{...t.checkboxRow,flexDirection:"row",alignItems:"center"},children:[e.jsxs("label",{style:t.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:n.isforced||!1,onChange:o=>{const d=[...x];d[s].isforced=o.target.checked,y(d)},style:t.checkbox}),e.jsx("span",{style:t.checkboxText,children:i.forcedDep})]}),e.jsx("span",{style:{...t.checkboxDesc,marginLeft:"10px"},children:i.forcedDepDesc})]})]}):e.jsxs("div",{style:{...t.itemRow,flexDirection:"column",alignItems:"stretch"},children:[e.jsxs("label",{style:t.label,children:[i.ruleContent,":"]}),e.jsx("textarea",{value:n.content,onChange:o=>{const d=[...x];d[s].content=o.target.value,y(d)},onFocus:o=>{o.target.style.boxShadow="0 0 0 3px rgba(0, 123, 255, 0.25)",o.target.style.borderColor="#007bff",Y(s)},onBlur:o=>{o.target.style.boxShadow="none",o.target.style.borderColor="#dee2e6",Y(null)},style:t.textarea,placeholder:a?`åœ¨æ­¤è¾“å…¥è§„åˆ™å†…å®¹ï¼Œä¾‹å¦‚:
DOMAIN,dmm.com,JP
DOMAIN,ad.com,REJECT
GEOSITE,openai,aiä¸“ç”¨`:`Enter rule content here, e.g.:
DOMAIN,dmm.com,JP
DOMAIN,ad.com,REJECT
GEOSITE,openai,ai-nodes`}),ie===s&&e.jsx("div",{style:t.ruleHint,children:a?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"æ”¯æŒçš„è§„åˆ™ç±»åž‹:"})," DOMAIN, GEOSITE, IP-CIDR, IP-ASN, GEOIP, MATCHç­‰",e.jsx("br",{}),e.jsx("strong",{children:"æ ¼å¼:"})," è§„åˆ™ç±»åž‹,åŒ¹é…å†…å®¹,èŠ‚ç‚¹ç»„åç§°ï¼ˆæˆ–è€…å†…ç½®ç­–ç•¥ï¼šREJECTã€DIRECTï¼‰ (ä¾‹å¦‚: GEOSITE,openai,aiä¸“ç”¨)",e.jsx("br",{}),e.jsx("a",{href:"https://wiki.metacubex.one/config/rules/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"è§„åˆ™è¯­æ³•å‚è€ƒ"}),e.jsx("br",{}),e.jsx("a",{href:"https://github.com/v2fly/domain-list-community/tree/master/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"geositeå‚è€ƒ"}),e.jsx("br",{}),e.jsx("strong",{children:"æç¤º:"})," è¯·å°½é‡ä½¿ç”¨åŸŸåè§„åˆ™(GEOSITE,DOMAIN)ï¼Œä½¿ç”¨IPç›¸å…³è§„åˆ™ä¼šè§¦å‘é¢å¤–çš„DNSè§£æžåŠ¨ä½œã€‚",e.jsx("br",{}),e.jsx("strong",{children:"é‡è¦:"})," è¯·ä¸è¦å¿˜è®°æœ€åŽä½¿ç”¨matchè§„åˆ™å…œåº•ï¼Œæ¯”å¦‚match,allï¼ˆå‡è®¾ä½ æœ‰ä¸€ä¸ªèŠ‚ç‚¹ç»„å«allï¼‰"]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Supported rule types:"})," DOMAIN, GEOSITE, IP-CIDR, IP-ASN, GEOIP, MATCH, etc.",e.jsx("br",{}),e.jsx("strong",{children:"Format:"})," RuleType,MatchContent,NodeGroupName (or built-in policy: REJECT, DIRECT) (e.g. GEOSITE,openai,ai-nodes)",e.jsx("br",{}),e.jsx("a",{href:"https://wiki.metacubex.one/config/rules/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Rule Syntax Reference"}),e.jsx("br",{}),e.jsx("a",{href:"https://github.com/v2fly/domain-list-community/tree/master/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Geosite Reference"}),e.jsx("br",{}),e.jsx("strong",{children:"Tip:"})," Prefer domain-based rules (GEOSITE,DOMAIN) as IP-based rules trigger additional DNS resolution.",e.jsx("br",{}),e.jsx("strong",{children:"Important:"}),` Don't forget to add a match rule as fallback, e.g. match,all (assuming you have a node group named "all")`]})})]})]},s)}),e.jsx("div",{style:t.sectionFooter,children:e.jsxs("button",{onClick:()=>y([...x,{priority:x.length+1,remark:"",name:"",type:"manual",url:"",rule_set_url:"",content:"",isforced:!1,behavior:"classical",interval:86400,format:"yaml"}]),style:t.addBtnRules,children:["+ ",i.addRuleSet]})})]})]}),e.jsxs("footer",{style:t.footer,children:["Â© PaoPaoGateWay | ",e.jsx("a",{href:"https://github.com/kkkgo/PaoPaoGateWay",target:"_blank",rel:"noopener noreferrer",style:t.footerLink,children:"GitHub"})]})]}),k&&e.jsxs("div",{style:{...t.deleteConfirmPopup,left:k.x,top:k.y},children:[e.jsx("button",{onClick:()=>he(k.type,k.index),style:t.confirmDeleteBtn,children:i.confirm}),e.jsx("button",{onClick:()=>R(null),style:t.cancelDeleteBtn,children:i.cancel})]}),I&&w!==null&&e.jsxs("div",{style:{...t.subsPopup,left:D.x,...D.verticalAlign==="bottom"?{top:"auto",bottom:window.innerHeight-(D.y-5)+10}:{top:D.y}},onClick:n=>n.stopPropagation(),children:[e.jsxs("select",{value:T,onChange:n=>ae(n.target.value),style:t.filterSelect,children:[e.jsx("option",{value:"sub",children:i.filterSub}),e.jsx("option",{value:"group",children:i.filterGroup}),e.jsx("option",{value:"both",children:i.filterBoth})]}),e.jsx("input",{type:"text",autoFocus:!0,value:C,onChange:n=>J(n.target.value),placeholder:a?"æœç´¢...":"Search...",style:t.subsSearchInput}),e.jsx("div",{style:{margin:"5px 0",borderBottom:"1px solid var(--color-separator)"}}),T!=="group"&&("all".includes(C.toLowerCase())||C==="")&&e.jsxs("div",{onClick:()=>{const n=[...u];n[w].subs=["all"],n[w].include=[],m(n),B(!1)},style:t.subsItem,children:[u[w].subs.includes("all")?"âœ“ ":"","â­ ",i.all]}),(()=>{let n=[];(T==="sub"||T==="both")&&(n=n.concat(g.map(r=>({name:r.name,type:"sub"})))),(T==="group"||T==="both")&&(n=n.concat(u.map((r,l)=>({name:r.name,type:"group",index:l})).filter(r=>r.index!==w)));const s=n.filter(r=>r.name&&r.name.toLowerCase().includes(C.toLowerCase()));return s.length===0&&C!==""?e.jsx("div",{style:{...t.subsItem,opacity:.5,cursor:"default"},children:a?"æ— åŒ¹é…é¡¹":"No matches"}):s.length===0&&C===""?e.jsx("div",{style:{...t.subsItem,opacity:.5,cursor:"default"},children:a?"æš‚æ— æ•°æ®":"No data"}):s.map((r,l)=>{const o=u[w],d=r.type==="sub"?o.subs.includes(r.name):(o.include||[]).includes(r.name);return e.jsxs("div",{onClick:()=>{const c=[...u],p=c[w];if(p.subs.includes("all")&&(p.subs=[]),r.type==="sub"){const b=p.subs.indexOf(r.name);b>-1?p.subs.splice(b,1):p.subs.push(r.name)}else{p.include||(p.include=[]);const b=p.include.indexOf(r.name);b>-1?p.include.splice(b,1):p.include.push(r.name)}p.subs.length===0&&(!p.include||p.include.length===0)&&(p.subs=["all"]),m(c)},onMouseEnter:c=>{c.currentTarget.style.background="var(--color-background2)"},onMouseLeave:c=>{c.currentTarget.style.background="transparent"},style:t.subsItem,children:[d?"âœ“ ":"",r.type==="group"?"ðŸ“¦ ":"âœˆï¸ ",r.name]},`${r.type}-${l}`)})})()]}),(I||k)&&e.jsx("div",{style:t.overlay,onClick:()=>{B(!1),R(null)}})]})}const t={body:{fontFamily:"var(--font-normal)",background:"var(--color-background)",minHeight:"100vh",padding:"20px",color:"var(--color-text)"},container:{maxWidth:"1200px",margin:"0 auto",background:"var(--color-bg-card)",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",overflow:"hidden",border:"1px solid var(--color-separator)"},header:{background:"var(--color-bg-sidebar)",borderBottom:"1px solid var(--color-separator)",padding:"24px 40px",display:"flex",justifyContent:"space-between",alignItems:"center"},titleContainer:{display:"flex",alignItems:"center",gap:"15px"},logo:{width:"48px",height:"48px",objectFit:"contain"},title:{margin:0,fontSize:"1.8em",fontWeight:700,color:"var(--color-text)"},headerActions:{display:"flex",gap:"15px"},content:{padding:"30px 40px"},exportBtn:{padding:"10px 24px",border:"none",borderRadius:"8px",background:"#28a745",color:"#fff",fontSize:"0.95em",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},importBtn:{padding:"10px 24px",border:"none",borderRadius:"8px",background:"var(--btn-bg)",color:"#fff",fontSize:"0.95em",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},loadBtn:{padding:"10px 24px",border:"none",borderRadius:"8px",background:"#17a2b8",color:"#fff",fontSize:"0.95em",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},sectionMonitor:{marginBottom:"30px",padding:"25px",background:"var(--bg-near-transparent)",borderRadius:"12px",border:"1px solid #4db6ac",borderLeft:"5px solid #009688"},sectionTitleMonitor:{margin:0,fontSize:"1.4em",fontWeight:700,color:"#26a69a"},sectionSubs:{marginBottom:"30px",padding:"25px",background:"var(--bg-near-transparent)",borderRadius:"12px",border:"1px solid #90caf9",borderLeft:"5px solid #1565c0"},sectionNodes:{marginBottom:"30px",padding:"25px",background:"var(--bg-near-transparent)",borderRadius:"12px",border:"1px solid #ce93d8",borderLeft:"5px solid #7b1fa2"},sectionRules:{marginBottom:"30px",padding:"25px",background:"var(--bg-near-transparent)",borderRadius:"12px",border:"1px solid #ffb74d",borderLeft:"5px solid #e65100"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},sectionTitleSubs:{margin:0,fontSize:"1.4em",fontWeight:700,color:"#42a5f5"},sectionTitleNodes:{margin:0,fontSize:"1.4em",fontWeight:700,color:"#ab47bc"},sectionTitleRules:{margin:0,fontSize:"1.4em",fontWeight:700,color:"#ff9800"},sectionFooter:{marginTop:"15px",display:"flex",justifyContent:"center"},addBtnSubs:{width:"100%",padding:"12px",border:"1px dashed #90caf9",borderRadius:"8px",background:"var(--color-background2)",color:"#42a5f5",fontSize:"1em",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},addBtnNodes:{width:"100%",padding:"12px",border:"1px dashed #ce93d8",borderRadius:"8px",background:"var(--color-background2)",color:"#ab47bc",fontSize:"1em",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},addBtnRules:{width:"100%",padding:"12px",border:"1px dashed #ffb74d",borderRadius:"8px",background:"var(--color-background2)",color:"#ff9800",fontSize:"1em",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},item:{background:"var(--color-bg-card)",borderRadius:"10px",padding:"20px",marginBottom:"15px",border:"1px solid var(--color-separator)",transition:"all 0.2s",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"},itemHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",paddingBottom:"12px",borderBottom:"1px solid var(--color-separator)"},itemNumber:{display:"inline-block",width:"28px",height:"28px",lineHeight:"28px",textAlign:"center",background:"var(--color-row-odd)",color:"var(--color-text)",borderRadius:"50%",fontWeight:700,fontSize:"0.85em"},itemName:{marginLeft:"12px",fontSize:"1.05em",color:"var(--color-text)",fontWeight:600},deleteBtn:{padding:"6px 14px",borderRadius:"6px",background:"transparent",color:"#ff4d4f",border:"1px solid #ff4d4f",fontSize:"0.85em",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},copyBtn:{padding:"6px 14px",borderRadius:"6px",background:"transparent",color:"#17a2b8",border:"1px solid #17a2b8",fontSize:"0.85em",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},itemRow:{display:"flex",alignItems:"flex-start",gap:"15px",marginBottom:"15px",flexWrap:"wrap"},label:{minWidth:"140px",fontWeight:600,color:"var(--color-text-secondary)",paddingTop:"10px",fontSize:"0.95em"},input:{flex:1,padding:"10px 14px",border:"1px solid var(--color-input-border)",borderRadius:"8px",fontSize:"0.95em",background:"var(--color-input-bg)",color:"var(--color-text)",transition:"all 0.2s",outline:"none"},checkboxRow:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"15px"},checkboxLabel:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:"var(--color-text)"},checkbox:{width:"18px",height:"18px",cursor:"pointer",background:"var(--color-input-bg)",accentColor:"var(--btn-bg)"},checkboxText:{fontWeight:600,color:"var(--color-text)",fontSize:"0.95em"},checkboxDesc:{fontSize:"0.85em",color:"var(--color-text-secondary)",marginLeft:"26px"},radioGroup:{display:"flex",gap:"20px",flex:1,paddingTop:"10px",flexWrap:"wrap"},radioLabel:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.95em",background:"var(--color-input-bg)",color:"var(--color-text)",padding:"8px 12px",borderRadius:"6px",border:"1px solid var(--color-input-border)",transition:"all 0.2s"},radio:{width:"16px",height:"16px",cursor:"pointer",accentColor:"var(--btn-bg)"},keywordContainer:{flex:1,display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"center"},keywordTag:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"20px",color:"#fff",fontSize:"0.9em",fontWeight:600,boxShadow:"0 1px 3px rgba(0,0,0,0.2)"},removeTag:{cursor:"pointer",fontSize:"1.2em",fontWeight:700,opacity:.8},addTagBtn:{padding:"6px 14px",border:"1px dashed var(--color-text-secondary)",borderRadius:"20px",background:"transparent",color:"var(--color-text-secondary)",fontSize:"0.9em",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},keywordInput:{padding:"6px 12px",border:"1px solid var(--btn-bg)",borderRadius:"20px",fontSize:"0.9em",minWidth:"120px",background:"var(--color-input-bg)",color:"var(--color-text)",outline:"none"},priorityBadge:{padding:"4px 10px",borderRadius:"4px",color:"white",fontSize:"0.85em",fontWeight:700},priorityBtn:{padding:"6px 12px",border:"1px solid var(--color-separator)",borderRadius:"6px",background:"var(--color-background2)",color:"var(--color-text)",fontSize:"0.85em",fontWeight:600,cursor:"pointer"},remarkText:{color:"var(--color-text-secondary)",fontStyle:"italic",cursor:"pointer",fontSize:"0.95em",borderBottom:"1px dashed var(--color-separator)"},remarkInput:{padding:"6px 12px",border:"1px solid var(--btn-bg)",borderRadius:"6px",fontSize:"0.95em",minWidth:"200px",background:"var(--color-input-bg)",color:"var(--color-text)",outline:"none"},textarea:{width:"100%",padding:"12px 16px",border:"1px solid var(--color-input-border)",borderRadius:"8px",fontFamily:"var(--font-normal)",fontSize:"0.9em",minHeight:"200px",resize:"vertical",lineHeight:"1.6",background:"var(--color-input-bg)",color:"var(--color-text)",outline:"none",boxSizing:"border-box"},emptyState:{textAlign:"center",color:"var(--color-text-secondary)",padding:"40px 20px",fontSize:"1em"},footer:{background:"var(--color-bg-sidebar)",borderTop:"1px solid var(--color-separator)",padding:"20px",textAlign:"center",color:"var(--color-text-secondary)",fontSize:"0.9em"},footerLink:{color:"var(--btn-bg)",textDecoration:"none",fontWeight:600},deleteConfirmPopup:{position:"fixed",background:"var(--color-bg-card)",borderRadius:"10px",padding:"16px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:10002,display:"flex",gap:"10px",border:"1px solid var(--color-separator)"},confirmDeleteBtn:{padding:"8px 18px",border:"none",borderRadius:"6px",background:"#dc3545",color:"white",fontSize:"0.9em",fontWeight:600,cursor:"pointer"},cancelDeleteBtn:{padding:"8px 18px",border:"1px solid var(--color-separator)",borderRadius:"6px",background:"var(--color-background)",color:"var(--color-text)",fontSize:"0.9em",fontWeight:600,cursor:"pointer"},subsPopup:{position:"fixed",background:"var(--color-bg-card)",color:"var(--color-text)",borderRadius:"10px",padding:"8px",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4)",zIndex:10002,maxHeight:"300px",overflowY:"auto",minWidth:"200px",border:"1px solid var(--color-separator)"},subsSearchInput:{width:"100%",padding:"8px",marginBottom:"4px",border:"1px solid var(--btn-bg)",borderRadius:"6px",fontSize:"0.9em",background:"var(--color-input-bg)",color:"var(--color-text)",outline:"none",boxSizing:"border-box"},filterSelect:{width:"100%",padding:"8px",marginBottom:"8px",border:"1px solid var(--btn-bg)",borderRadius:"6px",fontSize:"0.9em",background:"var(--color-input-bg)",color:"var(--color-text)",outline:"none",cursor:"pointer"},ruleHint:{marginTop:"10px",padding:"12px 16px",background:"var(--bg-near-transparent)",border:"1px solid #ffc107",borderRadius:"8px",fontSize:"0.85em",color:"var(--color-text)",lineHeight:"1.6"},subsItem:{padding:"10px 14px",cursor:"pointer",borderRadius:"6px",transition:"background 0.2s",fontSize:"0.95em",background:"var(--color-bg-card)",color:"var(--color-text)"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10001,background:"rgba(0,0,0,0.4)",backdropFilter:"blur(2px)"},keywordHintTooltip:{position:"absolute",top:"110%",left:"0",background:"var(--color-bg-card)",border:"1px solid var(--btn-bg)",padding:"6px 10px",borderRadius:"6px",fontSize:"0.8em",color:"var(--color-text)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:100,whiteSpace:"nowrap",pointerEvents:"none"},notificationBanner:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",padding:"12px 24px",borderRadius:"8px",zIndex:2e4,fontWeight:600,boxShadow:"0 4px 12px rgba(0,0,0,0.2)",textAlign:"center",maxWidth:"80%",animation:"fadeIn 0.3s ease-in-out"},notificationSuccess:{background:"#d4edda",color:"#155724",border:"1px solid #c3e6cb"},notificationError:{background:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb"},dropdownList:{position:"absolute",top:"100%",left:0,right:0,background:"var(--color-bg-card)",border:"1px solid var(--btn-bg)",borderRadius:"0 0 8px 8px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},dropdownItem:{padding:"10px 14px",cursor:"pointer",borderBottom:"1px solid var(--color-separator)",fontSize:"0.95em",color:"var(--color-text)",transition:"background 0.2s"}};export{je as default};
